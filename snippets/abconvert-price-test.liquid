<script id="ABConvert-price-test-v1">
var abconvertCssSettings = {"_id":"64ca7faf82c4960cdac2923c","storeName":"accelerated-test-store.myshopify.com","singleVariantSelector":"","productCardClass":"card-wrapper,product-item,grid-product__wrapper,collection-list__item,grid__item,grid-product,product-grid-item,product-card,grid-item,product-block,ProductItem,product","productPageDelay":0,"isPureVariantName":true,"bundleClassName":"vtl-ub-bundle-box__product-list,cbb-frequently-bought-container,th_pb_list_ul,bold-bundles-widget__items","isLocaleDecimal":false,"headIndex":0,"includeAtTop":false,"isSavingAmountExist":false,"isNotShowingDecimal":false,"isAttributeQuerySelector":false,"fromText":"From","hasRecommendationProduct":false,"bundleDelay":0,"hasColorSwatch":false,"isColorSwatchClassName":false,"inventoryNotificationButtonClass":"","customScript":"","hasVariantWizardSwatch":false,"needSelectFirstVariant":false,"hasCandyRackUpsell":false,"__v":0};

var abconvertLiquidVariables = {
    abconvertProduct : {{ product | json }},
    shopMoneyFormat: {{ shop.money_format | json }},
    shopMoneyWithCurrencyFormat : {{ shop.money_with_currency_format | json }},
    currencySymbol: {{ cart.currency.symbol | json }},
    currencyCode: {{ cart.currency.iso_code | json }},
    shopifyProductId: {{ product.id | json }},
    shopifyProductHandle: {{ product.handle | json }},
    pageType: {{ request.page_type | json }}, // product, index, search, collections
    shopifySelectedOrFirstAvailableVariantId: {{ product.selected_or_first_available_variant.id | json }},
};
Object.keys(abconvertCssSettings).forEach(function(key) { 
    if(key!='storeName' && key!='__v' && key!='_id'){ 
        window[key] = abconvertCssSettings[key]; 
    } 
});

Object.keys(abconvertLiquidVariables).forEach(function(key) {
    window[key] = abconvertLiquidVariables[key];
});


var abconvertDict = {"8444335718722":{"experimentId":"64d0e94f49c918717018857e","slug":"product-1","title":"Product 1","productId":"8444335718722","hasOnlyDefaultVariant":true,"isFirstVariantSelected":true,"firstVariantId":45571116728642,"testPercentages":[33,34,33],"variantIds":{"0":["45571116728642"],"1":["45958373048642"],"2":["45958373081410"],"all":["45571116728642","45958373048642","45958373081410"]},"options":{"0":["Default Title"],"1":["Default Title*"],"2":["Default Title**"],"all":["Default Title","Default Title*","Default Title**"]},"variantToOption":{"45571116728642":"Default Title","45958373048642":"Default Title*","45958373081410":"Default Title**"},"variantToPrice":{"45571116728642":55,"45958373048642":50,"45958373081410":70},"variantToCompareAtPrice":{"45571116728642":59.5,"45958373048642":56,"45958373081410":80},"testOptionToOriginalOption":{"Default Title*":"Default Title","Default Title**":"Default Title"},"variantToVariant":{"1":{"45571116728642":"45958373048642"},"2":{"45571116728642":"45958373081410"}},"lowestPrice":{"0":55,"1":50,"2":70},"lowestCompareAtPrice":{"0":59.5,"1":56,"2":80},"productIndex":0,"allLowestPrice":50,"allLowestCompareAtPrice":56,"firstVariantPrice":{"0":55,"1":50,"2":70},"firstVariantCompareAtPrice":{"0":59.5,"1":56,"2":80},"isSamePrice":true,"isFilteredByCountry":false,"filteredCountriesMap":{},"isFilteredByAudience":false,"audienceFilterList":[],"audienceFilterNotMatchAction":null},"allOptionsMap":{"Default Title*":"Default Title","Default Title**":"Default Title"},"fetchCountryCode":false,"setUrlParmas":false,"experiments":{"64d0e94f49c918717018857e":{"testPercentages":[33,34,33],"isFilteredByCountry":false,"filteredCountriesMap":{},"isFilteredByAudience":false,"audienceFilterList":[],"audienceFilterNotMatchAction":null}}};
 window.abconvertDict = abconvertDict;
(()=>{"use strict";var __webpack_modules__={643:(e,t,n)=>{n.d(t,{G:()=>o,v:()=>r});const r=(e,t,n)=>{let{operator:r,value:i,action:a,groupIndex:c=0}=t;switch(r){case"contain":return e.includes(i)?o({action:a,groupIndex:c}):-1;case"not contain":return e.includes(i)?-1:o({action:a,groupIndex:c});case"equal":return e===i?o({action:a,groupIndex:c}):-1;case"not equal":return e!==i?o({action:a,groupIndex:c}):-1;default:return-1}},o=e=>{let{action:t,groupIndex:n=0}=e;switch(t){case"assign-test-group":return n;case"assign-random":return"random";default:return 0}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var _audience_filter_handler_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(643);(async()=>{const currencyRoundingMap={KRW:1e3,INR:100,IDR:1e3,VND:1e3,PHP:100,JPY:100},optionValueKeys=["value","data-value","data-tooltip","data-escape","data-variant-id","data-vid","data-popup","v_id","data-id","data-option-value"];function directToVariant(e){var t=new URLSearchParams(location.search);t.set("variant",e),location.search=t.toString()}function sendViewEventXMR(e){var t=new XMLHttpRequest;let n="https://app.abconvert.io/api/observe?data="+btoa(JSON.stringify(e));t.open("GET",n),t.onload=function(){console.log(this.responseText)},t.send()}function getPrefixedLocalStorageItems(e){var t=Object.keys(localStorage).filter((function(t){return 0===t.indexOf(e)})),n={};return t.forEach((function(t){var r=t.slice(e.length),o=localStorage.getItem(t);n[r]=o})),n}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}function setCookie(e,t,n){var r,o=new Date;o.setTime(o.getTime()+n),r="; expires="+o.toUTCString(),document.cookie=e+"="+(t||"")+r+"; path=/"}async function getSession(){let e=getCookie("abconvert-session");if(!e){const t=await fetch("https://app.abconvert.io/api/get-session",{method:"GET"}),n=await t.json(),{sessionId:r}=n;e=r,setCookie("abconvert-session",e,72e5)}return e}async function sendVisitorEvent(e){let t="https://app.abconvert.io/api/observe/session?data="+btoa(JSON.stringify(e));fetch(t,{mode:"cors"}).then((e=>{e.ok?console.log("visitor recorded"):console.log("Failed to send product view event")}))}function recordVisitor(){getSession().then((async e=>{if(getCookie("abconvert-visitor-recorded"))return;setCookie("abconvert-visitor-recorded",!0,72e5);const t=abconvertDict.experiments;if(t)for(let[n,r]of Object.entries(t))sendVisitorEvent({sessionId:e,experimentId:n,groupIndex:getGroupIndex(r.testPercentages,r.isFilteredByCountry,r.filteredCountriesMap,r.isFilteredByAudience,r.audienceFilterList,r.audienceFilterNotMatchAction)})}))}async function sendViewEvent(e){let t="https://app.abconvert.io/api/observe?data="+btoa(JSON.stringify(e));fetch(t,{mode:"cors"}).then((e=>{e.ok?console.log("Product view"):console.log("Failed to send product view event")}))}function formatNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;if(window.Shopify&&window.Shopify.currency&&window.Shopify.currency.rate&&1!=window.Shopify.currency.rate)if(currencyRoundingMap[window.Shopify.currency.active]){const t=currencyRoundingMap[window.Shopify.currency.active];n=Math.ceil(e*window.Shopify.currency.rate/t)*t}else n=Math.ceil(e*window.Shopify.currency.rate);return window.isNotShowingDecimal&&Number.isInteger(n)?t?n.toString().replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,"."):n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):t?parseFloat(n).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,"."):parseFloat(n).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function getHashNumber(){let e=localStorage.getItem("abconvert-seed");return null==e&&(e=Math.floor(100*Math.random()).toString(),localStorage.setItem("abconvert-seed",e)),e}function getGroupIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(t){const e=getCountryCode();if(n&&!n[e])return 0}if(r&&o.length&&i){let e;e=-1;for(let t=0;t<o.length;t++){const n=o[t],r=n.trafficSource,a=localStorage.getItem(r);if(a&&(e=(0,_audience_filter_handler_js__WEBPACK_IMPORTED_MODULE_0__.v)(a,n,i)),-1!=e)break}if(-1==e&&(e=(0,_audience_filter_handler_js__WEBPACK_IMPORTED_MODULE_0__.G)(i)),"random"!=e)return e}const a=getHashNumber();let c,d=0;for(c=0;c<e.length;++c)if(d+=e[c],Number(a)<d)return c;return c}function isDirectedFromSamePage(){if(document.referrer){const e=new URL(document.referrer);if(e.pathname.includes("/products/"))return decodeURI(e.pathname).replace("/products/","").includes(window.shopifyProductHandle)||decodeURI(e.pathname).replace("/products/","").toLowerCase().includes(window.shopifyProductHandle)}return!1}async function handleProductPageVisit(){if(!isDirectedFromSamePage()&&abconvertDict[window.shopifyProductId]){const e=abconvertDict[window.shopifyProductId],t=getGroupIndex(e.testPercentages,e.isFilteredByCountry,e.filteredCountriesMap,e.isFilteredByAudience,e.audienceFilterList,e.audienceFilterNotMatchAction),n=e.variantIds[t][0],r=e.isFirstVariantSelected,o=e.firstVariantId;directToVariant(!r&&o?o:n)}}function handlePreviewProductPageVisit(e){if(!isDirectedFromSamePage()&&abconvertDict[window.shopifyProductId]){const t=abconvertDict[window.shopifyProductId];if(e<t.testPercentages.length){let n=!1;if(t.isFilteredByCountry&&t.filteredCountriesMap){const e=getPreviewCountryCode();e&&!t.filteredCountriesMap[e]&&(n=!0)}if(n){const e=t.variantIds[0][0],n=t.isFirstVariantSelected,r=t.firstVariantId;directToVariant(!n&&r?r:e)}else{const n=t.variantIds[e][0],r=t.isFirstVariantSelected,o=t.firstVariantId;directToVariant(!r&&o?o:n)}}else{const e=t.variantIds[0][0],n=t.isFirstVariantSelected,r=t.firstVariantId;directToVariant(!n&&r?r:e)}}}function getVariantsToHide(e,t){return e.variantIds.all.filter((n=>!e.variantIds[t].includes(n)))}function getVariants(e,t){return e.variantIds[t]}function getVariantsOption(e,t){return Array.from(new Set(t.map((t=>e.variantToOption[t]))))}function handleSingleVariant(e){const t=e.querySelector("variant-radios"),n=e.querySelector("variant-selects");if(t)t.style.display="none";else if(n)n.style.display="none";else if(window.singleVariantSelector){const t=e.querySelectorAll(window.singleVariantSelector);if(t)for(let e of t)e.getAttribute("data-processed-abconvert-single-variant")||(e.style.display="none",e.setAttribute("data-processed-abconvert-single-variant","true"));window.customClassSelector&&e.querySelector(window.customClassSelector).classList.add("abconvert-custom-class")}}function handleVariantInputElement(e,t){if(!e.getAttribute("data-processed-abconvert-input-element")&&t.includes(e.value)){const t=e.parentElement,n=e.previousElementSibling,r=e.nextElementSibling;try{"LABEL"==(null==n?void 0:n.nodeName)&&n.getAttribute("for")==e.getAttribute("id")&&n.remove(),"LABEL"==(null==r?void 0:r.nodeName)&&r.getAttribute("for")==e.getAttribute("id")&&r.remove(),"SPAN"==(null==n?void 0:n.nodeName)&&n.textContent.trim()==e.value&&n.remove(),"SPAN"==(null==r?void 0:r.nodeName)&&r.textContent.trim()==e.value&&r.remove()}catch(e){}e.style.display="none",t&&0==t.childElementCount&&!t.textContent.trim()&&(t.style.display="none"),t&&1==t.childElementCount&&"INPUT"==t.children[0].nodeName&&(t.style.display="none"),e.setAttribute("data-processed-abconvert-input-element","true")}}function handleOptionElement(e,t){e.getAttribute("data-processed-abconvert-option-element")||t.includes(e.value)&&(e.style.display="none",e.setAttribute("data-processed-abconvert-option-element","true"))}function handleDataValueOption(e,t){console.log("here"),e.map((e=>{const n=t.querySelectorAll(`[data-value='${e}'],[data-option-value='${e}'],[data-name='${e}'],[data-button='${e}']`);for(let e of n)if(!e.getAttribute("data-processed-abconvert-data-value-option")){const t=e.parentElement;e.style.display="none",t&&0==t.childElementCount&&!t.textContent.trim()&&(t.style.display="none"),t&&t.parentElement&&t.parentElement.classList.contains("sf__tooltip-top")&&(t.parentElement.style.display="none"),e.setAttribute("data-processed-abconvert-data-value-option","true")}}))}function removeVariantsByOptions(e,t){createNodeFilterByValue(document.body,e).forEach((t=>{"INPUT"==(null==t?void 0:t.nodeName)&&handleVariantInputElement(t,e),"OPTION"!=(null==t?void 0:t.nodeName)&&"BUTTON"!=(null==t?void 0:t.nodeName)||handleOptionElement(t,e)})),t&&handleSingleVariant(document.body),handleDataValueOption(e,document.body)}function getVariantById(e){const t=["value","data-value","data-tooltip","data-escape","data-variant-id","data-vid","data-popup","v_id","data-id","date-option-value","data-variantid","data-var_id"].map((t=>"["+t+'="'+e+'"]')).join(",");return document.querySelectorAll(t)}function getVariantByIdInElement(e,t){const n=["value","data-value","data-tooltip","data-escape","data-variant-id","data-vid","data-popup","v_id","data-id","date-option-value","data-variantid","data-var_id"].map((e=>"["+e+'="'+t+'"]')).join(",");return e.querySelectorAll(n)}function isOptionValueKeyExists(e,t){var n=new RegExp(t.join("|")+'=\\"\\d+\\"',"");return Array.from(e).some((function(e){return n.test(null==e?void 0:e.outerHTML)}))}function removeOptionsByVariantId(e){e.map((e=>{const t=getVariantById(e);for(let e of t)if(!e.getAttribute("data-processed-abconvert"))if("OPTION"===e.nodeName||"LI"===e.nodeName&&e.classList.contains("option"))e.style.display="none";else{var n;e.style.display="none",e.setAttribute("data-processed-abconvert","true"),window.hasColorSwatch&&"LABEL"==(null===(n=e.nextElementSibling)||void 0===n?void 0:n.nodeName)&&(e.nextElementSibling.style.display="none");const t=e.previousElementSibling,r=e.nextElementSibling;try{"LABEL"==(null==t?void 0:t.nodeName)&&t.getAttribute("for")==e.getAttribute("id")&&(t.style.display="none"),"LABEL"==(null==r?void 0:r.nodeName)&&r.getAttribute("for")==e.getAttribute("id")&&(r.style.display="none")}catch(e){}if(window.removeClosestTdInVariantId){const t=e.closest("td");t&&(t.style.display="none")}}}))}function removeOptionsByVariantIdInElement(e,t,n){t.map((t=>{const r=getVariantByIdInElement(e,t),o=[];for(let e of r){var i;e.getAttribute("data-processed-abconvert")||("OPTION"===e.nodeName||"LI"===e.nodeName&&e.classList.contains("option")?(o.push(e.parentElement),e.style.display="none"):(e.style.display="none",e.setAttribute("data-processed-abconvert","true"),window.hasColorSwatch&&"LABEL"==(null===(i=e.nextElementSibling)||void 0===i?void 0:i.nodeName)&&(e.nextElementSibling.style.display="none")))}if(n)for(let e of o)"SELECT"==(null==e?void 0:e.nodeName)&&(e.style.display="none")}))}function renameOptionsByVariantIds(e,t,n){e.map((e=>{const r=getVariantById(e);for(let o of r)o.getAttribute("data-processed-abconvert")||(o.textContent=o.textContent.replace(t[e],n[t[e]]),o.setAttribute("data-processed-abconvert","true"))}))}function handleBundleItemVariantIdInputs(e){e.map((e=>{const t=getVariantById(e);for(let e of t)e.getAttribute("data-processed-abconvert")&&e.getAttribute("input-clicked-abconvert")||("INPUT"==e.nodeName&&(e.setAttribute("checked","true"),elementChange(e)),"OPTION"==e.nodeName&&(e.setAttribute("selected","true"),elementChange(e)),e.setAttribute("input-clicked-abconvert","true"),e.setAttribute("data-processed-abconvert","true"))}))}function selectFirstOption(e){const t=e.querySelector("select");t&&t.getAttribute("data-processed-abconvert-select-first-option")&&(t.options.selectedIndex=0,t.setAttribute("data-processed-abconvert-select-first-option","true"),elementChange(t))}function handleBundleItem(){const e=getBundleElements(),t=Object.keys(abconvertDict);for(let n of e){"IFRAME"==n.nodeName&&(n=n.contentWindow.document.body);for(let e of t)if(isNumber(e)){const t=abconvertDict[e],r=getGroupIndex(t.testPercentages,t.isFilteredByCountry,t.filteredCountriesMap,t.isFilteredByAudience,t.audienceFilterList,t.audienceFilterNotMatchAction),o=getVariantsToHide(t,r),i=getVariants(t,r),a=t.hasOnlyDefaultVariant??!1;removeElementVariantByOption(n,getVariantsOption(t,o),a),0!=r&&(renameVariantById(i,t.variantToOption),renameAllOptions()),removeOptionsByVariantIdInElement(n,o,a)}}}function handlePreviewBundleItem(e){const t=getBundleElements(),n=Object.keys(abconvertDict);for(let r of t){"IFRAME"==r.nodeName&&(r=r.contentWindow.document.body);for(let t of n)if(isNumber(t)){const n=abconvertDict[t];let o;if(e<n.testPercentages.length){let t=!1;if(n.isFilteredByCountry&&n.filteredCountriesMap){const e=getPreviewCountryCode();e&&!n.filteredCountriesMap[e]&&(t=!0)}o=t?0:e}else o=0;const i=getVariantsToHide(n,o),a=getVariants(n,o),c=n.hasOnlyDefaultVariant??!1;removeElementVariantByOption(r,getVariantsOption(n,i),c),0!=o&&(renameVariantById(a,n.variantToOption),renameAllOptions()),removeOptionsByVariantIdInElement(r,i,c)}}}function selectElementByOption(e){const t=document.querySelectorAll(`[data-value="${e}"]`);for(let e of t)e.click()}function applyStyleToTestVariant(e){console.log("Apply style to test variant");for(let[t,n]of Object.entries(e)){const e=document.querySelector(`[data-value='${n}']`),r=document.querySelectorAll(`[data-value='${t}']`);for(let t of r)if(t&&!t.getAttribute("data-processed-abconvert-color-swatch")&&e){let n=e.style.cssText;n=n.replace("display: none",""),t.style.cssText=n,t.setAttribute("data-processed-abconvert-color-swatch","true")}}}function _handleProductPage(e,t){const n=getVariantsToHide(e,t),r=e.hasOnlyDefaultVariant??!1;if(window.needSelectFirstVariant){const n=e.variantIds[t][0],r=e.variantToOption[n];registerFunctionOnWindowLoad((()=>{selectElementByOption(r)}))}if(window.applySwatchStyle&&(0==t||r||registerFunctionOnWindowLoad((()=>{applyStyleToTestVariant(e.testOptionToOriginalOption)}))),removeVariantsByOptions(getVariantsOption(e,n),r),removeOptionsByVariantId(n),0==t||r||(renameOptions(e.testOptionToOriginalOption),renameOptionsByVariantIds(e.variantIds[t],e.variantToOption,e.testOptionToOriginalOption)),window.inventoryNotificationButtonClass){const e=document.querySelector(window.inventoryNotificationButtonClass);e&&(e.style.display="none")}}function handleProductPage(){if(abconvertDict[window.shopifyProductId]){const e=abconvertDict[window.shopifyProductId],t=getGroupIndex(e.testPercentages,e.isFilteredByCountry,e.filteredCountriesMap,e.isFilteredByAudience,e.audienceFilterList,e.audienceFilterNotMatchAction);if(isDirectedFromSamePage()&&!window.sessionStorage.getItem(e.productId)){let n=!0;if(e.isFilteredByCountry&&e.filteredCountriesMap){const t=getCountryCode();e.filteredCountriesMap[t]||(n=!1)}n&&(sendViewEvent({productIndex:e.productIndex,productId:e.productId,groupIndex:t,experimentId:e.experimentId}),window.sessionStorage.setItem(e.productId,"true"))}console.log("product exist"),_handleProductPage(e,t)}}function handlePreviewProductPage(e){if(abconvertDict[window.shopifyProductId]){const t=abconvertDict[window.shopifyProductId];let n;if(e<t.testPercentages.length){let r=!1;if(t.isFilteredByCountry&&t.filteredCountriesMap){const e=getPreviewCountryCode();e&&!t.filteredCountriesMap[e]&&(r=!0)}n=r?0:e}else n=0;_handleProductPage(t,n)}}function getPreviewNumber(){const e=new URLSearchParams(location.search),t=e.get("preview"),n=e.get("countryCode");return n&&window.sessionStorage.setItem("abconvert-country",n),t&&!isNaN(Number(t))?(window.sessionStorage.setItem("abconvert-preview-number",t),e.get("preview")):window.sessionStorage.getItem("abconvert-preview-number")}function getProductList(){let e;return e=window.productCardClass?window.isAttributeQuerySelector?window.productCardClass:window.productCardClass.split(",").map((e=>"a"==e?e:"."+e)).join(","):["card-wrapper","product-item","grid-product__wrapper","collection-list__item","grid__item","grid-product","product-grid-item","product-card","grid-item","product-block","product__grid","ProductItem","product"].map((e=>"."+e)).join(","),document.querySelectorAll(e)}function removeElementVariantByOption(e,t,n){createNodeFilterByValue(e,t).forEach((e=>{"INPUT"==(null==e?void 0:e.nodeName)&&handleVariantInputElement(e,t),"OPTION"==(null==e?void 0:e.nodeName)&&handleOptionElement(e,t)})),n&&handleSingleVariant(e),handleDataValueOption(t,e)}function renameElementOptions(e,t){const n=Object.keys(t),r=createNodeFilterByTextContent(e,n),o=createNodeFilterByValue(e,n);for(let e of r){const r=e.parentElement;var i,a,c;if(r&&(null==r||!r.getAttribute("data-processed-abconvert")))t[null==e||null===(i=e.textContent)||void 0===i?void 0:i.trim()]?e.textContent=null==e?void 0:e.textContent.replaceAll(null==e||null===(a=e.textContent)||void 0===a?void 0:a.trim(),t[null==e||null===(c=e.textContent)||void 0===c?void 0:c.trim()]):n.forEach((n=>{var r;null!=e&&null!==(r=e.textContent)&&void 0!==r&&r.trim().includes(n)&&(e.textContent=t[n])})),null==r||r.setAttribute("data-processed-abconvert","true")}let d=!1;for(let e of o)if(!d){if("INPUT"==e.nodeName&&!e.getAttribute("data-processed-abconvert")){e.setAttribute("checked","checked"),e.setAttribute("data-processed-abconvert","true"),d=!0;try{(new VariantSelects).updateVariantInput(),(new VariantRadios).updateVariantInput()}catch(e){}}if("OPTION"==e.nodeName&&!e.getAttribute("data-processed-abconvert")){e.setAttribute("selected","selected"),e.setAttribute("data-processed-abconvert","true"),d=!0;try{(new VariantSelects).updateOptions()}catch(e){}}elementChange(e)}}function isAddToCartExist(e){return!!e.querySelector('form[action="/cart/add"]')}function updateAddToCart(e,t){const n=e.querySelector('form[action="/cart/add"]');if(n){const e=n.querySelector('input[name="id"]');e&&(e.value=t)}}function renameOptions(e){const t=Object.keys(e).reverse(),n=createNodeFilterByTextContent(document.body,t);for(let a of n){const n=a.parentElement;var r,o,i;if(n&&(null==n||!n.getAttribute("data-processed-abconvert")))e[null==n||null===(r=n.textContent)||void 0===r?void 0:r.trim()]?(a.textContent=null==a?void 0:a.textContent.replaceAll(null==a||null===(o=a.textContent)||void 0===o?void 0:o.trim(),e[null==a||null===(i=a.textContent)||void 0===i?void 0:i.trim()]),window.isColorSwatchClassName&&"LABEL"==n.nodeName&&(n.outerHTML=n.outerHTML.replaceAll("*",""))):t.forEach((t=>{var n;null!=a&&null!==(n=a.textContent)&&void 0!==n&&n.trim().includes(t)&&(a.textContent=a.textContent.replace(t,e[t]))})),elementChange(n),null==n||n.setAttribute("data-processed-abconvert","true")}}function renameAllOptions(){const e=abconvertDict.allOptionsMap,t=Object.keys(e).reverse();createNodeFilterByTextContent(document.body,t).forEach((n=>{const r=n.parentElement;r&&!r.getAttribute("data-processed-abconvert")&&t.forEach((t=>{var o,i,a;null!==(o=n.textContent)&&void 0!==o&&o.trim().includes(t)&&(n.textContent=n.textContent.replaceAll(t,e[t]),r.setAttribute("data-processed-abconvert","true"),null!==(i=r.textContent)&&void 0!==i&&i.includes("Default Title")&&"SPAN"==r.nodeName&&(null!==(a=r.previousSibling.textContent)&&void 0!==a&&a.includes("Title")&&"SPAN"==r.previousSibling.nodeName&&(r.previousSibling.style.display="none"),r.style.display="none"))}))})),createNodeFilterByTextContent(document.body,["Default Title","Default Title*","Default Title**","Default Title***","Default Title****"]).forEach((e=>{const t=e.parentElement;var n;t&&!t.getAttribute("data-processed-abconvert-default-title")&&null!==(n=t.textContent)&&void 0!==n&&n.includes("Default Title")&&(t.style.display="none")}))}function renameVariantById(e,t){const n=abconvertDict.allOptionsMap;let r=!1;e.forEach((e=>{const o=getVariantById(e);for(let i of o)if(!i.getAttribute("data-processed-abconvert")&&("OPTION"===i.nodeName||"LI"===i.nodeName&&i.classList.contains("option"))){const o=t[e];i.textContent=i.textContent.replace(o,n[o]),i.setAttribute("data-processed-abconvert","true"),r||(i.setAttribute("selected","selected"),elementChange(i),r=!0)}}))}function elementChange(e){try{e.dispatchEvent(new Event("change",{bubbles:!0}))}catch(e){console.log("Failed to trigger a change event.")}}function elementClick(e){try{e.dispatchEvent(new Event("click",{bubbles:!0}))}catch(e){console.log("Failed to trigger a click event.")}}function selectFirstVariant(e,t){const n=e.querySelectorAll("form");for(let e of n){const n=e.querySelector("input[name='id']");n&&(n.getAttribute("data-processed-abconvert-add-to-cart")||(n.setAttribute("value",t),n.setAttribute("data-processed-abconvert-add-to-cart","true")))}}function cleanUpProductByProductId(e,t,n){const r=abconvertDict[t],o=getVariantsToHide(r,n),i=r.hasOnlyDefaultVariant??!1,a=getVariantsOption(r,o);window.applySwatchStyle&&(0==n||i||registerFunctionOnWindowLoad((()=>{applyStyleToTestVariant(r.testOptionToOriginalOption)}))),removeElementVariantByOption(e,a,i),removeOptionsByVariantId(o),0!=n&&(selectFirstVariant(e,r.variantIds[n][0]),i||(renameElementOptions(e,r.testOptionToOriginalOption),renameOptionsByVariantIds(r.variantIds[n],r.variantToOption,r.testOptionToOriginalOption)))}function handleSwatchVariantColor(e){const t=e.querySelector(".grid-product__colors");if(t){const e={};for(let n of t.childNodes)"SPAN"==n.nodeName&&(e[n.style.backgroundColor]?n.style.display="none":e[n.style.backgroundColor]=!0)}}function changeElementPrice(e,t,n){e.innerHTML=e.innerHTML.replaceAll(t,n)}function isProductExist(e,t){const n=e.querySelectorAll("a");if(n.length)return Array.from(n).filter((e=>{if(!e.href)return!1;const n=new URL(e.href).pathname.split("/");return n[n.length-1]==encodeURI(`${t}`)})).length>0;if("A"==e.nodeName){if(!e.href)return!1;const n=new URL(e.href).pathname.split("/");return n[n.length-1]==encodeURI(`${t}`)}return!1}function isProductExistById(e,t){const n=["data-product-id","id"].map((e=>"["+e+'="'+t+'"]')).join(",");return 0!=e.querySelectorAll(n).length||e.getAttribute("data-product-id")==t}function getProductCardParams(e,t){const n=e.lowestPrice[0],r=e.lowestCompareAtPrice[0],o=e.allLowestPrice,i=e.allLowestCompareAtPrice,a=e.lowestPrice[t],c=e.lowestCompareAtPrice[t],d=e.slug,s=1==e.variantIds[t].length;return{originLowestPrice:n,originCompareAtPrice:r,lowestPrice:o,lowestCompareAtPrice:i,priceToReplace:a,compareAtPriceToReplace:c,originalFirstVariantPrice:e.firstVariantPrice[0],originalFirstVariantCompareAtPrice:e.firstVariantCompareAtPrice[0],firstVariantPrice:e.firstVariantPrice[t],firstVariantCompareAtPrice:e.firstVariantCompareAtPrice[t],slug:d,onlyVariant:s,isSamePrice:!!e.isSamePrice}}function _handleProductCard(e,t,n,r){let{originLowestPrice:o,originCompareAtPrice:i,lowestPrice:a,lowestCompareAtPrice:c,priceToReplace:d,compareAtPriceToReplace:s,originalFirstVariantPrice:l,originalFirstVariantCompareAtPrice:u,firstVariantPrice:p,firstVariantCompareAtPrice:m,slug:f,onlyVariant:g,isSamePrice:b}=r;if((isProductExist(e,f)||isProductExistById(e,n))&&!e.getAttribute("data-processed-abconvert")){cleanUpProductByProductId(e,n,t);const r={};if(r[formatNumber(a)]=formatNumber(d),r[formatNumber(a,!0)]=formatNumber(d,!0),r[formatNumber(o)]=formatNumber(d),r[formatNumber(o,!0)]=formatNumber(d,!0),c&&s&&(r[formatNumber(c)]=formatNumber(s),r[formatNumber(i)]=formatNumber(s),r[formatNumber(c,!0)]=formatNumber(s,!0),r[formatNumber(i,!0)]=formatNumber(s,!0)),r[formatNumber(l)]=formatNumber(p),r[formatNumber(l,!0)]=formatNumber(p,!0),u&&m&&(r[formatNumber(u)]=formatNumber(m),r[formatNumber(u,!0)]=formatNumber(m,!0)),window.isSavingAmountExist){const e=c-a,t=i-o,n=s-d;c>0&&(r[formatNumber(e)]=formatNumber(n),r[formatNumber(e,!0)]=formatNumber(n,!0)),t>0&&(r[formatNumber(t)]=formatNumber(n),r[formatNumber(t,!0)]=formatNumber(n,!0))}const f=Object.keys(r),g=createNodeFilterByPrice(e,f);for(let e of g)e.parentNode.getAttribute("data-processed-abconvert-price")||f.forEach((t=>{var n;e.parentNode.getAttribute("data-processed-abconvert-price")||null!==(n=e.textContent)&&void 0!==n&&n.trim().includes(t)&&(e.textContent=e.textContent.replace(t,r[t]),e.parentNode.setAttribute("data-processed-abconvert-price","true"))}));if(b){let t;t=window.fromText&&"string"==typeof window.fromText?[window.fromText,window.fromText.toLowerCase()]:["From","from"];const n=createNodeFilterByPrice(e,t);for(let e of n){const n=e.parentNode;n.getAttribute("data-processed-abconvert-from-text")||(t.forEach((t=>{var n;null!==(n=e.textContent)&&void 0!==n&&n.trim().includes(t)&&(e.textContent=e.textContent.replaceAll(t,""))})),n.setAttribute("data-processed-abconvert-from-text","true"))}if(window.priceVariesClass){const t=e.querySelector(`${window.priceVariesClass}`);t&&(t.style.display="none")}}handleSwatchVariantColor(e),e.setAttribute("data-processed-abconvert","true")}}function handleProductCard(){const e=getProductList();for(let[t,n]of Object.entries(abconvertDict))if(isNumber(t)){const t=getGroupIndex(n.testPercentages,n.isFilteredByCountry,n.filteredCountriesMap,n.isFilteredByAudience,n.audienceFilterList,n.audienceFilterNotMatchAction),{originLowestPrice:r,originCompareAtPrice:o,lowestPrice:i,lowestCompareAtPrice:a,priceToReplace:c,compareAtPriceToReplace:d,originalFirstVariantPrice:s,originalFirstVariantCompareAtPrice:l,firstVariantPrice:u,firstVariantCompareAtPrice:p,slug:m,onlyVariant:f,isSamePrice:g}=getProductCardParams(n,t);for(let b of e)_handleProductCard(b,t,n.productId,{originLowestPrice:r,originCompareAtPrice:o,lowestPrice:i,lowestCompareAtPrice:a,priceToReplace:c,compareAtPriceToReplace:d,originalFirstVariantPrice:s,originalFirstVariantCompareAtPrice:l,firstVariantPrice:u,firstVariantCompareAtPrice:p,slug:m,onlyVariant:f,isSamePrice:g})}}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function handlePreviewProductCard(e){const t=getProductList();for(let[n,r]of Object.entries(abconvertDict))if(isNumber(n)){let n;if(e>=r.testPercentages.length)n=0;else{let t=!1;if(r.isFilteredByCountry&&r.filteredCountriesMap){const e=getPreviewCountryCode();e&&!r.filteredCountriesMap[e]&&(t=!0)}n=t?0:e}const{originLowestPrice:o,originCompareAtPrice:i,lowestPrice:a,lowestCompareAtPrice:c,priceToReplace:d,compareAtPriceToReplace:s,originalFirstVariantPrice:l,originalFirstVariantCompareAtPrice:u,firstVariantPrice:p,firstVariantCompareAtPrice:m,slug:f,onlyVariant:g,isSamePrice:b}=getProductCardParams(r,n);for(let e of t)_handleProductCard(e,n,r.productId,{originLowestPrice:o,originCompareAtPrice:i,lowestPrice:a,lowestCompareAtPrice:c,priceToReplace:d,compareAtPriceToReplace:s,originalFirstVariantPrice:l,originalFirstVariantCompareAtPrice:u,firstVariantPrice:p,firstVariantCompareAtPrice:m,slug:f,onlyVariant:g,isSamePrice:b})}}function handleAddToCartSubmit(){document.addEventListener("submit",(function(e){"string"==typeof e.target.action==("/cart/add"===e.target.action.slice(-9))&&(console.log("add to cart here"),renameAllOptions())}))}function getBundleElements(){let e;e=window.bundleClassName?bundleClassName:"vtl-ub-bundle-box__product-list,cbb-frequently-bought-container,th_pb_list_ul,bold-bundles-widget__items,ast-vd-total-price-wrapper";const t=e.split(",").map((e=>e.includes("#")?e:"."+e)).join(",");return document.querySelectorAll(t)}function isBundleAdded(){return!!getBundleElements().length}async function fetchCountryCode(){const e=await fetch("https://app.abconvert.io/api/public/get-country-code",{method:"GET",mode:"cors"}),t=(await e.json()).countryCode;t&&(console.log("successfully set country code: ",t),localStorage.setItem("abconvert-country",t))}function setUrlParams(){const e=new URLSearchParams(location.search);for(let[t,n]of e.entries())localStorage.setItem(t,n);console.log("successfully set url params")}async function setCountryCode(){localStorage.getItem("abconvert-country")||await fetchCountryCode()}function getCountryCode(){return localStorage.getItem("abconvert-country")}function getPreviewCountryCode(){return window.sessionStorage.getItem("abconvert-country")}function handleCandyRackUpsell(){const e=document.body;new MutationObserver((function(e,t){for(let t of e)if("childList"===t.type&&t.addedNodes.length>0)for(let e of t.addedNodes)"IFRAME"==e.nodeName&&"candyrack-frame"==e.getAttribute("id")&&_handleCandyRackIframeElemet(e)})).observe(e,{childList:!0,subtree:!0})}const _handleCandyRackIframeElemet=e=>{const t=e.contentWindow.document.body;let n=getPreviewNumber();setTimeout((()=>{const e=t.querySelectorAll("li");for(let r of e){let e=r.getAttribute("id"),o=r.getAttribute("data-offer-id");const i=e.replace(o,"");if(abconvertDict[i]){const e=abconvertDict[i];let o;if(n&&!isNaN(Number(n)))if(n>=e.testPercentages.length)o=0;else{let t=!1;if(e.isFilteredByCountry&&e.filteredCountriesMap){const n=getPreviewCountryCode();n&&!e.filteredCountriesMap[n]&&(t=!0)}o=t?0:n}else o=getGroupIndex(e.testPercentages,e.isFilteredByCountry,e.filteredCountriesMap,e.isFilteredByAudience,e.audienceFilterList,e.audienceFilterNotMatchAction);const a=getVariantsToHide(e,o),c=e.hasOnlyDefaultVariant??!1;if(selectOptionByVariantId(r,e.variantIds[o][0]),removeOptionsByVariantIdInElement(r,a,c,!0),c&&(r.querySelector(".Select-Variant--wrapper").style.display="none"),0!=o){const n=getVariants(e,o);renameVariantIdInCandyRackElement(t,n,e.variantToOption)}}}}),1e3),e.onload=function(){const e=t.querySelectorAll("li");for(let r of e){let e=r.getAttribute("id"),o=r.getAttribute("data-offer-id");const i=e.replace(o,"");if(abconvertDict[i]){const e=abconvertDict[i];let o;if(n&&!isNaN(Number(n)))if(n>=e.testPercentages.length)o=0;else{let t=!1;if(e.isFilteredByCountry&&e.filteredCountriesMap){const n=getPreviewCountryCode();n&&!e.filteredCountriesMap[n]&&(t=!0)}o=t?0:n}else o=getGroupIndex(e.testPercentages,e.isFilteredByCountry,e.filteredCountriesMap,e.isFilteredByAudience,e.audienceFilterList,e.audienceFilterNotMatchAction);const a=getVariantsToHide(e,o),c=e.hasOnlyDefaultVariant??!1;if(selectOptionByVariantId(r,e.variantIds[o][0]),removeOptionsByVariantIdInElement(r,a,c),c&&(r.querySelector(".Select-Variant--wrapper").style.display="none"),0!=o){const n=getVariants(e,o);renameVariantIdInCandyRackElement(t,n,e.variantToOption)}}}}};function selectOptionByVariantId(e,t){const n=e.querySelector("select");if(n&&!n.getAttribute("data-processed-abconvert-select-first-option")){const e=n.options;for(let n=0;n<e.length;n++)if(e[n].value==t){e.selectedIndex=n;break}n.setAttribute("data-processed-abconvert-select-first-option","true"),elementChange(n)}}function renameVariantIdInCandyRackElement(e,t,n){const r=abconvertDict.allOptionsMap;t.forEach((t=>{const o=getVariantByIdInElement(e,t);for(let e of o)if(!e.getAttribute("data-processed-abconvert-candy-rack")&&"OPTION"===e.nodeName){const o=n[t];e.textContent=e.textContent.replace(o,r[o]),e.setAttribute("data-processed-abconvert-candy-rack","true")}}))}function handleFrequentlyBoughtTogether(e){const t=Object.keys(abconvertDict),n=e.querySelector(".cbb-frequently-bought-selector-list").childNodes;if(!e.getAttribute("data-processed-abconvert-frequently-bought-together")){for(let e of t)if(Number(e))for(let t of n)if(t.querySelector(`[name="product_${e}"]`)){const n=abconvertDict[e];let r,o=getPreviewNumber();if(o&&!isNaN(Number(o)))if(o>=n.testPercentages.length)r=0;else{let e=!1;if(n.isFilteredByCountry&&n.filteredCountriesMap){const t=getPreviewCountryCode();t&&!n.filteredCountriesMap[t]&&(e=!0)}r=e?0:o}else r=getGroupIndex(n.testPercentages,n.isFilteredByCountry,n.filteredCountriesMap,n.isFilteredByAudience,n.audienceFilterList,n.audienceFilterNotMatchAction);const i=getVariantsToHide(n,r),a=n.hasOnlyDefaultVariant??!1;selectOptionByVariantId(t,n.variantIds[r][0]),removeOptionsByVariantIdInElement(t,i,a)}e.setAttribute("data-processed-abconvert-frequently-bought-together","true")}}async function abconvertOperation(){const previewNumber=getPreviewNumber();window.abconvertDict&&window.abconvertDict.fetchCountryCode&&await setCountryCode(),window.abconvertDict&&window.abconvertDict.setUrlParmas&&setUrlParams(),previewNumber||recordVisitor(),("index"==window.pageType||"collection"==window.pageType||window.pageType.includes("search")||"page"==window.pageType)&&(previewNumber&&!isNaN(Number(previewNumber))?(registerFunctionOnWindowLoad((()=>{handlePreviewProductCard(Number(previewNumber))})),registerFunctionOnWindowLoad((()=>{const e=new MutationObserver((function(e){handlePreviewProductCard(Number(previewNumber))}));try{e.observe(document.body,{childList:!0,subtree:!0})}catch(e){console.log("[ABConvert] Error: ",e.message)}}))):(registerFunctionOnWindowLoad(handleProductCard),registerFunctionOnWindowLoad((()=>{const e=new MutationObserver((function(e){handleProductCard()}));try{e.observe(document.body,{childList:!0,subtree:!0})}catch(e){console.log("[ABConvert] Error: ",e.message)}})))),"product"==window.pageType&&(previewNumber&&!isNaN(Number(previewNumber))?(handlePreviewProductPageVisit(Number(previewNumber)),registerFunction((()=>{window.productPageDelay?setTimeout((()=>{handlePreviewProductPage(Number(previewNumber))}),window.productPageDelay):handlePreviewProductPage(Number(previewNumber))})),registerFunctionOnWindowLoad((()=>{const e=document.querySelector(".cbb-frequently-bought-container");e&&handleFrequentlyBoughtTogether(e),new MutationObserver((function(e){const t=document.querySelector(".cbb-frequently-bought-container");t&&handleFrequentlyBoughtTogether(t)})).observe(document.body,{childList:!0,subtree:!0})})),registerFunctionOnWindowLoad((()=>{const e=new MutationObserver((function(e){for(let t=0;t<e.length;++t){const n=e[t],r=isBundleAdded();if(r||"childList"==n.type&&n.addedNodes.length&&isOptionValueKeyExists(n.addedNodes,optionValueKeys)){r&&(window.bundleDelay?setTimeout((()=>{handlePreviewBundleItem(Number(previewNumber))}),window.bundleDelay):(console.log("handle bundle"),handlePreviewBundleItem(Number(previewNumber))),window._rsi&&window._rsi.form.quantityOffers.updatePricesFirst());break}}}));try{e.observe(document.body,{childList:!0,subtree:!0})}catch(e){console.log("[ABConvert] Error: ",e.message)}})),window.hasRecommendationProduct&&(registerFunctionOnWindowLoad((()=>{handlePreviewProductCard(Number(previewNumber))})),registerFunctionOnWindowLoad((()=>{const e=new MutationObserver((function(e){handlePreviewProductCard(Number(previewNumber))}));try{e.observe(document.body,{childList:!0,subtree:!0})}catch(e){console.log("[ABConvert] Error: ",e.message)}})))):(handleProductPageVisit(),registerFunction((()=>{window.productPageDelay?setTimeout((()=>{handleProductPage()}),window.productPageDelay):handleProductPage()})),registerFunctionOnWindowLoad((()=>{const e=document.querySelector(".cbb-frequently-bought-container");e&&handleFrequentlyBoughtTogether(e),new MutationObserver((function(e){const t=document.querySelector(".cbb-frequently-bought-container");t&&handleFrequentlyBoughtTogether(t)})).observe(document.body,{childList:!0,subtree:!0})})),registerFunctionOnWindowLoad((()=>{const e=new MutationObserver((function(e){for(let t=0;t<e.length;++t){const n=e[t],r=isBundleAdded();if(r||"childList"==n.type&&n.addedNodes.length&&isOptionValueKeyExists(n.addedNodes,optionValueKeys)){r&&(window.bundleDelay?setTimeout((()=>{handleBundleItem()}),window.bundleDelay):handleBundleItem(),window._rsi&&window._rsi.form.quantityOffers.updatePricesFirst());break}}}));try{e.observe(document.body,{childList:!0,subtree:!0})}catch(e){console.log("[ABConvert] Error: ",e.message)}})),window.hasRecommendationProduct&&(registerFunctionOnWindowLoad(handleProductCard),registerFunctionOnWindowLoad((()=>{const e=new MutationObserver((function(e){handleProductCard()}));try{e.observe(document.body,{childList:!0,subtree:!0})}catch(e){console.log("[ABConvert] Error: ",e.message)}}))))),window.customScript&&eval(window.customScript),window.hasCandyRackUpsell&&registerFunctionOnWindowLoad(handleCandyRackUpsell),registerFunctionOnWindowLoad(handleAddToCartSubmit),registerFunctionOnWindowLoad(renameAllOptions),registerFunctionOnWindowLoad((()=>{new MutationObserver((e=>{renameAllOptions()})).observe(document.body,{childList:!0,subtree:!0})}))}function registerFunction(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,!1):(console.log("DOMContentLoaded has already fired. Executing directly."),e())}function registerFunctionOnWindowLoad(e){"complete"===document.readyState?(console.log("Window load already fired. Executing directly."),e()):window.addEventListener("load",e,!1)}function createNodeFilterByValue(e,t){for(var n,r=[],o=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return e.value&&(t.includes(e.value)||t.includes(e.textContent.trim()))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});n=o.nextNode();)n&&r.push(n);return r}function createNodeFilterByTextContent(e,t){for(var n,r=[],o=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){let n=!1;return window.isPureVariantName?n=t.includes(e.textContent.trim())||t.includes(e.textContent.trim().replace(",","")):t.forEach((t=>{e.textContent.trim().includes(t)&&(n=!0)})),n?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});n=o.nextNode();)n&&r.push(n);return r}function createNodeFilterByPrice(e,t){for(var n,r=[],o=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){let n=!1;return t.forEach((t=>{e.textContent.trim().includes(t)&&(n=!0)})),n?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});n=o.nextNode();)n&&r.push(n);return r}console.log("running ABConvert price test script 2 - with country code version - detect collection refresh version");try{abconvertOperation()}catch(e){console.log("[ABConvert] Error: ",e.message)}})()})()})();
</script>